#!/bin/sh

dzd=$(curl -sf wttr.in | sed '16q;d' | grep -wo "[0-9]*%" | sort -rn | sed "s/^/ğŸ’§/g;1q" | tr -d '\n')
pogoda=$(curl -sf wttr.in/?format="%t+%w+%m\n" | awk '{print "ğŸŒ"$1 " " $2 " " $3}')
prognoza=$(curl -sf wttr.in | sed '13q;d' | grep -o "m\\([-+]\\)*[0-9]\\+" | sed 's/+//g' | sort -n -t 'm' -k 2n | sed -e 1b -e '$!d' | tr '\n|m' ' ' | awk '{print "ğŸ”»" $1 "Â°" "ğŸ”º" $2 "Â°"}')

if [ $(echo "$pogoda" | grep -E "(Unknown|curl|HTML)" | wc -l) -gt 0 ]; then
    echo "Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾"
else
    echo "$pogoda$dzd $prognoza"
fi
